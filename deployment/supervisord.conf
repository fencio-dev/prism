[supervisord]
nodaemon=true
logfile=/dev/stdout
logfile_maxbytes=0
loglevel=info

[program:data-plane]
command=/app/bridge-server
directory=/app
priority=1
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=RUST_LOG="info",MANAGEMENT_PLANE_URL="http://localhost:8001/api/v1"

[program:management-plane]
command=/bin/bash -c "cd /app/management_plane && python -m uvicorn app.main:app --host 0.0.0.0 --port 8001"
directory=/app/management_plane
priority=2
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
environment=GOOGLE_API_KEY="%(ENV_GOOGLE_API_KEY)s",DATA_PLANE_GRPC_URL="localhost:50051",LD_LIBRARY_PATH="/app",PYTHONPATH="/app/management_plane",PATH="/usr/local/bin:%(ENV_PATH)s"
